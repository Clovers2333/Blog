
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="test1">
      
      
      
        <link rel="canonical" href="https://clovers2333.github.io/Clovers-Blog/cs/system/books/csapp/Lec5-9/">
      
      
        <link rel="prev" href="../Lec4/">
      
      
        <link rel="next" href="../Lec10/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Machine-Level Programming - Clovers' Blog</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#machine-level-programming" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../../.." title="Clovers&#39; Blog" class="md-header__button md-logo" aria-label="Clovers' Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4zM3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7zm2-2v2h2V5zm0 14h2v-2H5zm0-6h2v-2H5z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Clovers' Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Machine-Level Programming
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Clovers2333/Clovers-Blog/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Clovers2333/Clovers-Blog
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../.." class="md-tabs__link">
          
  
    
  
  Welcome

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../basic/bash_cheatsheet/" class="md-tabs__link">
          
  
    
  
  Computer Science

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../math/LinearAlgebra/quadratic/" class="md-tabs__link">
          
  
    
  
  Math

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../finance/micro/" class="md-tabs__link">
          
  
    
  
  Economy & Finance

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../life/summary/23-24_winter_summary/" class="md-tabs__link">
          
  
    
  
  Life

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Clovers&#39; Blog" class="md-nav__button md-logo" aria-label="Clovers' Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4zM3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7zm2-2v2h2V5zm0 14h2v-2H5zm0-6h2v-2H5z"/></svg>

    </a>
    Clovers' Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Clovers2333/Clovers-Blog/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Clovers2333/Clovers-Blog
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Welcome
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../links/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    友链
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Computer Science
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic/bash_cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bash Cheatsheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic/MIT-Missing-Semester/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MIT Missing Semester
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic/fpa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    程序设计与算法基础
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Basic Languages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Basic Languages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../languages/python/cs61a/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CS61A
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../languages/python/cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cheatsheet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Structure
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Data Structure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/fds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../ds/ads/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            高级数据结构与算法分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/ds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构全家桶
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/back/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    回溯
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/divide.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分治
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/greedy_DP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    贪心和动态规划
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/NP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NP 问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/Appr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    近似算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/LocalSearch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    局部搜索
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/rand/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    随机化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/parallel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    并行计算
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ds/ads/external/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    外部排序
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../ai/intro/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    人工智能引论
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_1" id="__nav_2_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_1">
            <span class="md-nav__icon md-icon"></span>
            人工智能引论
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ai/intro/logic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    逻辑与推理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ai/intro/search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    搜索与求解
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ai/intro/ml_s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习——监督学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ai/intro/ml_uns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习——无监督学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ai/intro/dl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ai/intro/rl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    强化学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ai/intro/game/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    人工智能博弈
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" checked>
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    System
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_1" >
        
          
          <label class="md-nav__link" for="__nav_2_5_1" id="__nav_2_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Languages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_1">
            <span class="md-nav__icon md-icon"></span>
            Languages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../languages/cs61c/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CS61C
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../languages/v_cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verilog Cheatsheet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../os/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Operating System
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5_2" id="__nav_2_5_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_2">
            <span class="md-nav__icon md-icon"></span>
            Operating System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../os/Intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../os/Structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Structure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../os/Process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../os/Scheduling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scheduling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../os/Thread/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Thread
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../os/Synchronization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synchronization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../os/Deadlock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deadlock
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_5_3" id="__nav_2_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Books
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5_3">
            <span class="md-nav__icon md-icon"></span>
            Books
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_3_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    CSAPP
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5_3_1" id="__nav_2_5_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_5_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5_3_1">
            <span class="md-nav__icon md-icon"></span>
            CSAPP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../labs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Labs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Lec2-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bits, Bytes and Integer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Lec4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Floating Points
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Machine-Level Programming
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Machine-Level Programming
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lecture-5-overview-moving-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 5 - Overview &amp; Moving Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 5 - Overview & Moving Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Definitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turning-c-into-assembly-code" class="md-nav__link">
    <span class="md-ellipsis">
      Turning C into Assembly Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-get-an-assembly-code" class="md-nav__link">
    <span class="md-ellipsis">
      How to Get an Assembly Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assembly-characteristics-data-types" class="md-nav__link">
    <span class="md-ellipsis">
      Assembly Characteristics: Data Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x86-64-integer-registers" class="md-nav__link">
    <span class="md-ellipsis">
      x86-64 Integer Registers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moving-data" class="md-nav__link">
    <span class="md-ellipsis">
      Moving Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Moving Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operand-types" class="md-nav__link">
    <span class="md-ellipsis">
      Operand Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mov-operand-combinations" class="md-nav__link">
    <span class="md-ellipsis">
      mov Operand Combinations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displacement" class="md-nav__link">
    <span class="md-ellipsis">
      Displacement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#address-computation" class="md-nav__link">
    <span class="md-ellipsis">
      Address Computation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lecture-6-condition-codes-loops" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 6 - Condition Codes &amp; Loops
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 6 - Condition Codes & Loops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#condition-codes" class="md-nav__link">
    <span class="md-ellipsis">
      Condition Codes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Condition Codes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implicit-setting" class="md-nav__link">
    <span class="md-ellipsis">
      Implicit Setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setx-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      SetX Instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jumping-branches" class="md-nav__link">
    <span class="md-ellipsis">
      Jumping - Branches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-statement" class="md-nav__link">
    <span class="md-ellipsis">
      Switch Statement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loops" class="md-nav__link">
    <span class="md-ellipsis">
      Loops
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Loops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-while-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Do-While Loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#while-loop" class="md-nav__link">
    <span class="md-ellipsis">
      While Loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-loop" class="md-nav__link">
    <span class="md-ellipsis">
      For Loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lecture-7-procedure" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 7 - Procedure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 7 - Procedure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x86-64-stack" class="md-nav__link">
    <span class="md-ellipsis">
      x86-64 Stack
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calling-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Calling Conventions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calling Conventions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#passing-control" class="md-nav__link">
    <span class="md-ellipsis">
      Passing Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-data" class="md-nav__link">
    <span class="md-ellipsis">
      Passing Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-local-data" class="md-nav__link">
    <span class="md-ellipsis">
      Managing Local Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lecture-8-data" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 8 - Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 8 - Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#array" class="md-nav__link">
    <span class="md-ellipsis">
      Array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-alignment" class="md-nav__link">
    <span class="md-ellipsis">
      Data Alignment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#union" class="md-nav__link">
    <span class="md-ellipsis">
      Union
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xmm-registers" class="md-nav__link">
    <span class="md-ellipsis">
      Xmm Registers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lecture-9-advanced-topics" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 9 - Advanced Topics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 9 - Advanced Topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buffer-overflow" class="md-nav__link">
    <span class="md-ellipsis">
      Buffer Overflow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Buffer Overflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stack-randomization" class="md-nav__link">
    <span class="md-ellipsis">
      Stack Randomization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-corruption-dection" class="md-nav__link">
    <span class="md-ellipsis">
      Stack Corruption Dection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limiting-executable-code-regions" class="md-nav__link">
    <span class="md-ellipsis">
      Limiting Executable Code Regions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x86-64-linux-memory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      x86-64 Linux Memory Layout
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Lec10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimizing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Lec11-13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Processor Structure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../books/system/dlco.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数字逻辑与计算机组成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../books/system/ddca.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Digital Design and Computer Architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Math
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Math
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    线性代数
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            线性代数
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../math/LinearAlgebra/quadratic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    二次型
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Economy & Finance
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Economy & Finance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../finance/micro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    微观经济学
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../finance/corporate/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    公司金融
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            公司金融
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../finance/corporate/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    财务报表及模型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../finance/corporate/investment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    现值计算及投资决策
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../finance/corporate/financing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    融资决策和资产定价
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../finance/corporate/dividend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    股利政策
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Life
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Life
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    总结
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            总结
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../life/summary/23-24_winter_summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23-24寒假总结
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lecture-5-overview-moving-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 5 - Overview &amp; Moving Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 5 - Overview & Moving Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Definitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turning-c-into-assembly-code" class="md-nav__link">
    <span class="md-ellipsis">
      Turning C into Assembly Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-get-an-assembly-code" class="md-nav__link">
    <span class="md-ellipsis">
      How to Get an Assembly Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assembly-characteristics-data-types" class="md-nav__link">
    <span class="md-ellipsis">
      Assembly Characteristics: Data Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x86-64-integer-registers" class="md-nav__link">
    <span class="md-ellipsis">
      x86-64 Integer Registers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moving-data" class="md-nav__link">
    <span class="md-ellipsis">
      Moving Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Moving Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operand-types" class="md-nav__link">
    <span class="md-ellipsis">
      Operand Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mov-operand-combinations" class="md-nav__link">
    <span class="md-ellipsis">
      mov Operand Combinations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displacement" class="md-nav__link">
    <span class="md-ellipsis">
      Displacement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#address-computation" class="md-nav__link">
    <span class="md-ellipsis">
      Address Computation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lecture-6-condition-codes-loops" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 6 - Condition Codes &amp; Loops
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 6 - Condition Codes & Loops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#condition-codes" class="md-nav__link">
    <span class="md-ellipsis">
      Condition Codes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Condition Codes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implicit-setting" class="md-nav__link">
    <span class="md-ellipsis">
      Implicit Setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setx-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      SetX Instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jumping-branches" class="md-nav__link">
    <span class="md-ellipsis">
      Jumping - Branches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-statement" class="md-nav__link">
    <span class="md-ellipsis">
      Switch Statement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loops" class="md-nav__link">
    <span class="md-ellipsis">
      Loops
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Loops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-while-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Do-While Loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#while-loop" class="md-nav__link">
    <span class="md-ellipsis">
      While Loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-loop" class="md-nav__link">
    <span class="md-ellipsis">
      For Loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lecture-7-procedure" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 7 - Procedure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 7 - Procedure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x86-64-stack" class="md-nav__link">
    <span class="md-ellipsis">
      x86-64 Stack
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calling-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Calling Conventions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calling Conventions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#passing-control" class="md-nav__link">
    <span class="md-ellipsis">
      Passing Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-data" class="md-nav__link">
    <span class="md-ellipsis">
      Passing Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-local-data" class="md-nav__link">
    <span class="md-ellipsis">
      Managing Local Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lecture-8-data" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 8 - Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 8 - Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#array" class="md-nav__link">
    <span class="md-ellipsis">
      Array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-alignment" class="md-nav__link">
    <span class="md-ellipsis">
      Data Alignment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#union" class="md-nav__link">
    <span class="md-ellipsis">
      Union
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xmm-registers" class="md-nav__link">
    <span class="md-ellipsis">
      Xmm Registers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lecture-9-advanced-topics" class="md-nav__link">
    <span class="md-ellipsis">
      Lecture 9 - Advanced Topics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lecture 9 - Advanced Topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buffer-overflow" class="md-nav__link">
    <span class="md-ellipsis">
      Buffer Overflow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Buffer Overflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stack-randomization" class="md-nav__link">
    <span class="md-ellipsis">
      Stack Randomization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-corruption-dection" class="md-nav__link">
    <span class="md-ellipsis">
      Stack Corruption Dection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limiting-executable-code-regions" class="md-nav__link">
    <span class="md-ellipsis">
      Limiting Executable Code Regions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x86-64-linux-memory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      x86-64 Linux Memory Layout
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="machine-level-programming">Machine-Level Programming<a class="headerlink" href="#machine-level-programming" title="Permanent link">&para;</a></h1>
<h2 id="lecture-5-overview-moving-operations">Lecture 5 - Overview &amp; Moving Operations<a class="headerlink" href="#lecture-5-overview-moving-operations" title="Permanent link">&para;</a></h2>
<h3 id="definitions">Definitions<a class="headerlink" href="#definitions" title="Permanent link">&para;</a></h3>
<ul>
<li>Architecture (also ISA: instruction set architecture)：指令集，编译器所编译的目标。</li>
</ul>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Machine_Programming_Definitions.7p3d8s7et6.webp" /></p>
<ul>
<li>上图介绍了在汇编语言的视角下，计算机一些最基本的组件。<ul>
<li>Register file 即寄存器，暂存数据和地址（有限容量的高速存储部件，cache 是扩充，寄存器更快）（并不是按照数字下标索引，而是有特定的名字）。</li>
<li>Condition codes 用来保存最近几次运算的结果，用于条件语句。</li>
<li>不可见的 Memory 被视为一大块数组，为虚拟内存。</li>
</ul>
</li>
</ul>
<h3 id="turning-c-into-assembly-code">Turning C into Assembly Code<a class="headerlink" href="#turning-c-into-assembly-code" title="Permanent link">&para;</a></h3>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Turning_C_to_ObjectCode.2krojil1vi.webp" /></p>
<ul>
<li>依次进行的操作为：预处理（展开头文件、替换操作符、展开宏定义）、编译、汇编、链接。</li>
<li>以下是一个具体的例子：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kt">long</span><span class="w"> </span><span class="nf">plus</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">sumstore</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="o">*</span><span class="n">dest</span><span class="p">){</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="o">*</span><span class="n">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sumstore:
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    pushq   %rbx
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    movq    %rdx, %rbx
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    call    plus
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    movq    %rax, (%rbx)
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    popq    %rbx
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>    ret
</code></pre></div>
<ul>
<li><code>%&lt;name&gt;</code>：寄存器的名称。</li>
<li><code>pushq</code>：push somthing to the stack.</li>
<li><code>movq</code>：move sth. from one place to another.</li>
<li><code>call</code>：call a procedure.</li>
<li><code>ret</code>：return from a specific function.</li>
<li><strong>Each line written in text will turn into an instruction in the object code.</strong></li>
</ul>
<p><strong>以下是对于这个例子中赋值语句的解释：</strong></p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Assembly_Assigning_Exanple.ibvvim1by.webp" /></p>
<ul>
<li>
<p>用一个寄存器 <code>rbx</code> 保存 dest 的地址。</p>
</li>
<li>
<p><code>mov</code> 语句的意思：将 <code>rax</code> 寄存器中的数值，移到 <code>rbx</code> 寄存器上的地址所指向的位置。</p>
<p>（如果没有括号，那就是简单地把 <code>rax</code> 上的数字移到 <code>rbx</code> 上保存）</p>
</li>
<li>
<p>汇编上的每个 text，实则都有一个编码，所以在汇编过程中，会把一条汇编语句转成一个二进制的 instruction，一般在 1~14 bytes（？）</p>
<p>（汇编语言：低级语言；二进制：机器语言）</p>
</li>
<li>
<p>Disassembler: 把 Object Code 转化成 Assembly Code；但是不能完全还原 Source Code，因为很多信息例如变量名称会在转化成 Assembly Code 时丢失。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>objdump<span class="w"> </span>-d<span class="w"> </span>sum<span class="w"> </span>&gt;<span class="w"> </span>sum.d
</code></pre></div>
<p>"objdump"：系统自带的反汇编程序。</p>
<p>同时在 <code>gdb</code> 逐步调试 Object Code 时，可运行 <code>dissassemable &lt;function&gt;</code> 来反编译其中一个函数。</p>
</li>
</ul>
<h3 id="how-to-get-an-assembly-code">How to Get an Assembly Code<a class="headerlink" href="#how-to-get-an-assembly-code" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>汇编语言的文件后缀：<code>.s</code>；反汇编语言的后缀：<code>.d</code></p>
</li>
<li>
<p>把 C 语言编译成汇编语言的命令：<code>gcc -Og -S *.c</code></p>
<p>当你调用 gcc 时，实际上你调用的不仅仅是一个程序，而是一整个程序序列，已完成整个编译过程。</p>
<p>这里的两个编译选项，<code>-S</code> 是停止，只进行编译成汇编的那步；<code>-Og</code> 是一种优化的规范，使得汇编代码更好读懂（g：调试级别；如果采用 O1, O2 这种优化效率，那么更加难读懂）。</p>
</li>
</ul>
<h3 id="assembly-characteristics-data-types">Assembly Characteristics: Data Types<a class="headerlink" href="#assembly-characteristics-data-types" title="Permanent link">&para;</a></h3>
<ul>
<li>Integer data of 1, 2, 4 or 8 bytes.<ul>
<li>地址或指针都以整型存储</li>
</ul>
</li>
<li>Floating point data of 4, 8 or 10 bytes.（表示方法和 C 语言大相径庭） </li>
<li>No aggregate types（较大型的数据类型）such as arrays or structures.<ul>
<li>Just contiguously allocated bytes in memory.</li>
<li>Built-up in more superior languages.</li>
</ul>
</li>
</ul>
<h3 id="x86-64-integer-registers">x86-64 Integer Registers<a class="headerlink" href="#x86-64-integer-registers" title="Permanent link">&para;</a></h3>
<ul>
<li><code>%r</code>：表示 64 位；<code>%e</code>：表示 32 位。（IA32：8 个寄存器；x86-64：16 个寄存器；<code>%rsp, %esp</code>：栈指针）</li>
</ul>
<h3 id="moving-data">Moving Data<a class="headerlink" href="#moving-data" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>movq &lt;source&gt;, &lt;dest&gt;</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>movabsq $0xffffffffffffffff, %rax
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>movb $0, %al  # rax = 0xffffffffffffff00
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>movw $0, %ax  # rax = 0xffffffffffff0000
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>movl $0, %rax # rax = 0xffffffff00000000
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>movl $0, %eax # rax = 0x0000000000000000
</code></pre></div>
</li>
</ul>
<h4 id="operand-types">Operand Types<a class="headerlink" href="#operand-types" title="Permanent link">&para;</a></h4>
<ul>
<li>Immediate：Constant integer data.（<code>$0x4, $-147</code>）</li>
<li>Register: One of 16 integer registers. (<code>%rsp</code> is reserved)</li>
<li>Memory: 8 consecutive bytes of memory at address given by register.( <code>(%rax)</code> )</li>
</ul>
<h4 id="mov-operand-combinations"><code>mov</code> Operand Combinations<a class="headerlink" href="#mov-operand-combinations" title="Permanent link">&para;</a></h4>
<ul>
<li>看上去三种数据类型总共有九种组合方式，但其实只有五种：<code>Imm</code> 作为常数不可能成为 <code>dest</code>；<code>Mem-Mem</code> 的操作也会被分解成 <code>Mem-Reg-Mem</code>.</li>
<li><code>movq (%rax) %rbx</code>：从内存中取一个值，从内存中读取它并将其复制到寄存器中。（<code>%rax</code> 本身是一个数字，用数字表示地址；但加括号以后就变成了地址所指的值，相当于 C 语言中的解引用 <code>*</code>）</li>
</ul>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/movq_operand_combination.51dx5bddta.webp" /></p>
<p>但是相对于巨大的 Memory 空间，16 个寄存器该如何实现访问内存的功能呢？</p>
<h4 id="displacement">Displacement<a class="headerlink" href="#displacement" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>D(R)：<code>Mem[Reg[R]]--&gt;Mem[Reg[R]+D]</code>.</p>
<p><code>movq 8(%rbp), %rdx</code>：取 <code>%rbp</code> 地址右移 8 个字节后的所指向的元素。</p>
</li>
<li>
<p>D(Rb, Ri, S)：<code>Mem[Reg[Rb]+S*Reg[Ri]+D]</code>.</p>
<p><code>S</code>：根据表示的数据类型来决定位移字节的大小，这样更加方便，如 <code>int：4, double：8</code>.</p>
<p>（也被称为 Complete Memory Addressing Modes）</p>
</li>
</ul>
<h3 id="address-computation">Address Computation<a class="headerlink" href="#address-computation" title="Permanent link">&para;</a></h3>
<p>对于上面的 Complete Addressing，因为在汇编语言中，地址本质上就是整型，所以我们不仅可以用它来算地址，也可以用于变量的计算。</p>
<p>对于正常的 Complete Addressing，因为语法是 <code>(Rb, Ri, S)</code> ，我们在计算完地址的同时会同时及进行解引用操作，返回地址所指的数值；而 <code>leaq</code> 函数则提供了计算地址之后只返回地址，而不进行解引用操作的一种方式。</p>
<ul>
<li><code>leaq Src, Dst</code>：<ul>
<li><code>Src</code> is address mode expression.</li>
<li>Set <code>Dst</code> to address denoted by expression.</li>
<li>可以视为一个比较特殊的运算操作。</li>
<li><strong>leaq 非常重要的作用：create pointers.</strong></li>
</ul>
</li>
</ul>
<p>一些其它的运算操作：</p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Assembly_Arithmetic_Operations.7p3dfqezgz.webp" /></p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Assembly_Arithmetic_Operations2.5q76pechg8.webp" /></p>
<ul>
<li>和 <code>mov</code> 类似，被赋值的寄存器是在后面的！</li>
<li>Example:</li>
</ul>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Assembly_Arithmetic_Example.6bgubp9csc.webp" /></p>
<h2 id="lecture-6-condition-codes-loops">Lecture 6 - Condition Codes &amp; Loops<a class="headerlink" href="#lecture-6-condition-codes-loops" title="Permanent link">&para;</a></h2>
<h3 id="condition-codes">Condition Codes<a class="headerlink" href="#condition-codes" title="Permanent link">&para;</a></h3>
<h4 id="implicit-setting">Implicit Setting<a class="headerlink" href="#implicit-setting" title="Permanent link">&para;</a></h4>
<ul>
<li>CF：进位标志（对于 unsigned）</li>
<li>SF：正负标志（若为负数则设置为 1）</li>
<li>ZF：是否为 0</li>
<li>OF：是否溢出</li>
</ul>
<p>例如在普通进行加法的时候，这四个 flag 就会隐式设置：</p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Condition_Codes_AddSetting.5mnkt0fv9v.webp" /></p>
<p>注意！<code>leaq</code> 操作时不会设置。</p>
<p>对于 Compare/Test 操作，这四个符号相当于是在对于 <code>a-b</code> 作判断。</p>
<ul>
<li><code>cmpq b, a</code> like computing <code>a-b</code> without setting destination.</li>
<li><code>testq b, a</code> like computing <code>a&amp;b</code> without setting destination（可以 <code>testq a, a</code> 来判断 a 的正负性）</li>
</ul>
<p><strong>以上两个操作在机器代码中编写参数的方式与我们正常所期望的相反！</strong></p>
<h4 id="setx-instructions">SetX Instructions<a class="headerlink" href="#setx-instructions" title="Permanent link">&para;</a></h4>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/SetX_Instructions.3nre2p1vgn.webp" /></p>
<p>以上这些 Instruction 都是基于这 4 个 Flag 的组合。</p>
<p><strong>Example:</strong></p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Condition_Code_Example1.7smzettn7u.webp" /></p>
<ul>
<li><code>setg %al</code> 表示将 Flag 组合运算的值赋值到 <code>%al</code> 上。</li>
<li><code>movzbl</code> 表示低位扩展，高位补 0（<code>b</code>: Byte (8 bits); <code>w</code>: word (16 bits); <code>l</code>: long (32 bits) ）</li>
<li>然后第三行的 <code>Dest</code> 设置为 32 位的 <code>%eax</code>，是因为对于一个 64 位寄存器只赋值其前 32 位，高位会自动补上 0.</li>
</ul>
<h4 id="jumping-branches">Jumping - Branches<a class="headerlink" href="#jumping-branches" title="Permanent link">&para;</a></h4>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/JX_Instructions.9rj656beq1.webp" /></p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Conditional_Branch_Example.70a3x3yxdv.webp" /></p>
<p>（类似于 goto？）</p>
<p>事实上，gcc 在将上述 source code 转成汇编时，并不会右边的汇编代码，如果你不添加特定的编译指令的话，他会进行优化——conditional move.</p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Conditional_Moves.7ljrjfzhbx.webp" /></p>
<h4 id="switch-statement">Switch Statement<a class="headerlink" href="#switch-statement" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>不同于我们之前所想的，丢入一个 x，程序会对每一个 case 进行检索，时间复杂度 <span class="arithmatex">\(O(Case)\)</span>；事实上，在编译过程中会对每一种 case 进行地址索引，通过空间换时间的方式来实现 <span class="arithmatex">\(O(1)\)</span> 锁定 case.</p>
</li>
<li>
<p>对于 default 的情况，编译器会比较聪明，在编译的时候也会进行很多优化，例如 case 有 <code>x = 1,2,4,5</code> ，那么就会在开头用无符号大小判断一下 <code>x</code> 是不是 <code>&gt; 5</code>，如果是直接进入 <code>default</code>（也同时干掉了负数），然后对 <code>0, 1, 2, 3, 4, 5</code> 进行索引（0, 3 索引到 <code>default</code> ）</p>
</li>
<li>
<p>更聪明的是，如果你的 case 是负数，它会通过 add bias 的等方式来使你的最小值为 0.</p>
</li>
<li>
<p>更更聪明的是，如果 case 值太过分散，那么它会采用 BST 或者直接改成 if-else，来实现时空综合效率的最大化。</p>
<p>（CMU 的学生把我想到的 Corner Cases 全问到了hhhh）</p>
</li>
</ul>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/switch_statement_example.1e8dksed0y.webp" /></p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Jump_Table.9nzk90w228.webp" /></p>
<ul>
<li>
<p>Direct Jumping: <code>jmp .L8</code>（内存都是在的，也可以直接编号访问，但能拿来运算处理的只有寄存器（？））</p>
</li>
<li>
<p>Indirect Jumping: <code>jmp *.L4(, %rdi, 8)</code></p>
<ul>
<li>Start of the table: <code>.L4</code></li>
<li>Addresses are 8 bytes</li>
<li>Fetch target by effective Address <code>.L4 + x*8 (0 &lt;= x &lt;= 6)</code></li>
</ul>
<p>（Jump Table 中保存各个 case 的 label（其实就是该 case 地址的别名），表头+一定字节的地址索引到具体的 case label，然后再 Jump 到那个 label 运行 case） </p>
</li>
<li>
<p>Fall Through 并不是编译器不够聪明，而是设计者就想给你这么一种选项（其实个人感觉这是 C 语言设计比较反人类的一点）</p>
</li>
<li>
<p>如果先前赋值的 <code>w</code> 仅在 case 块中用到，为了节省时间，会在要用到这个赋值的块中才加这句话。</p>
</li>
</ul>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/switch_code_block1.67x8h02b2q.webp" /></p>
<p>所以虽然在个人在写 Source Code 的时候很抵触 case 语法，但其实作者在编写过程中还是花了一定心思的，它的底层也是值得去探究的。</p>
<p><strong>Bad Cases for conditional move:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Test</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">f1</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f2</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">x</span><span class="o">*=</span><span class="mi">7</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="o">+=</span><span class="mi">3</span><span class="p">;</span>
</code></pre></div>
<ul>
<li>慎用三目运算符，因为两个结果都会被计算。</li>
<li>可能会导致运算时间过长、边界报错、有 side-effect 等问题。</li>
</ul>
<h3 id="loops">Loops<a class="headerlink" href="#loops" title="Permanent link">&para;</a></h3>
<h4 id="do-while-loop">Do-While Loop<a class="headerlink" href="#do-while-loop" title="Permanent link">&para;</a></h4>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/do_while_loop.5mnkujykn3.webp" /></p>
<h4 id="while-loop">While Loop<a class="headerlink" href="#while-loop" title="Permanent link">&para;</a></h4>
<h5 id="example-1-jump-to-middle">Example 1 - Jump to Middle<a class="headerlink" href="#example-1-jump-to-middle" title="Permanent link">&para;</a></h5>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Jump_to_Middle.45hfst765n.webp" /></p>
<h5 id="example-2-o1-optimization">Example 2 - O1 Optimization<a class="headerlink" href="#example-2-o1-optimization" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>改成先判断一次，如果不成立直接结束，否则转变成 do-while loop.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">Test</span><span class="p">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="k">goto</span><span class="w"> </span><span class="n">done</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nl">loop</span><span class="p">:</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="n">Body</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Test</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">loop</span><span class="p">;</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="n">done</span><span class="p">;</span>
</code></pre></div>
</li>
</ul>
<h4 id="for-loop">For Loop<a class="headerlink" href="#for-loop" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">Init</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">Test</span><span class="p">){</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="n">Body</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="n">Update</span><span class="p">;</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>在采用 O1 优化的时候，Complier 可以帮你去掉一些显而易见的判断语句，比如 Init 之后 while 转 do-while 的初始判断，若显然成立，直接删掉。</li>
</ul>
<h2 id="lecture-7-procedure">Lecture 7 - Procedure<a class="headerlink" href="#lecture-7-procedure" title="Permanent link">&para;</a></h2>
<ul>
<li>ABI: Application Binary Interface，即应用程序二进制接口。它定义了应用程序与操作系统之间进行交互的方式和规范，确保不同的软件组件能够正确地协同工作。</li>
</ul>
<h3 id="x86-64-stack">x86-64 Stack<a class="headerlink" href="#x86-64-stack" title="Permanent link">&para;</a></h3>
<ul>
<li>从一个很高的地址开始存数据，<strong>从高往低</strong>。</li>
<li>寄存器 <code>%rsp</code> 储存栈的最低点，也即栈顶。</li>
<li>汇编语言中的 <code>push/pop</code> 都是指对栈的操作。 </li>
</ul>
<h3 id="calling-conventions">Calling Conventions<a class="headerlink" href="#calling-conventions" title="Permanent link">&para;</a></h3>
<h4 id="passing-control">Passing Control<a class="headerlink" href="#passing-control" title="Permanent link">&para;</a></h4>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Control_Flow_Example.70a4sxdm2c.webp" /></p>
<ul>
<li>对于<code>call</code> 语句：当调用函数 <code>mult2</code> 时，我们暂时将下一个语句的地址存到 <code>stack</code> 里面，然后程序计数器 <code>%rip</code> 跳转到函数的地址开始运行函数，当函数运行结束以后，再取栈顶的地址开始运行。</li>
<li>对于 <code>ret</code> 语句：reverse the effect of <code>call</code>，把 <code>%rip</code> 跳回栈顶，然后栈 <code>pop</code>.</li>
</ul>
<h4 id="passing-data">Passing Data<a class="headerlink" href="#passing-data" title="Permanent link">&para;</a></h4>
<ul>
<li>通过 <code>%rdi, %rsi, %rdx, %rcx, %r8, %r9</code> 六个寄存器来传输值，通过 <code>%rax</code> 来返回值。</li>
<li>如果传输值超过六个？——把多余的参数放在栈里面。</li>
</ul>
<h4 id="managing-local-data">Managing Local Data<a class="headerlink" href="#managing-local-data" title="Permanent link">&para;</a></h4>
<p>主要是对于栈的管理，对于一个递归树形结构的管理。（<a href="https://blog.csdn.net/xungjhj/article/details/70946057">reference</a>）</p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/Stack_Frame.2yy5lddnnj.webp" /></p>
<ul>
<li>参数 <code>1~n</code> 是传给 caller 的参数，上面的地址保存一些需要暂存的变量。</li>
<li>栈帧（stack frame）表示一个函数所占的栈空间，<code>%rsp</code> 保存栈顶的地址，<code>%rbp</code> 保存当前运行函数的最高地址。</li>
<li>当函数 return 时，通过 <code>%rbp</code> 返回函数的最高地址，然后在这个地址中把 <code>%rbp</code> 更新成 father 函数的 <code>%rbp</code>。</li>
<li>然后再读取返回地址，也就是调用 <code>son</code> 以后 <code>father</code> 要继续运行的语句的地址，把栈上的参数弹出，要返回的变量进行恢复，继续运行返回语句即可。</li>
</ul>
<p>以下是一个递归的汇编代码：</p>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/recursion_example.6pnb6nfaob.webp" /></p>
<p>其中 <code>pushq %rbx</code> 是暂存 <code>%rbx</code> 中的值；<code>popq %rbx</code> 是返回 <code>%rbx</code> 的值。</p>
<p>为什么不用 <code>%rbp</code> 作栈帧了？——因为每一层递归只需要在栈中 push 一个元素，所以简单地 pop 就行了。</p>
<h2 id="lecture-8-data">Lecture 8 - Data<a class="headerlink" href="#lecture-8-data" title="Permanent link">&para;</a></h2>
<h3 id="array">Array<a class="headerlink" href="#array" title="Permanent link">&para;</a></h3>
<p>没啥好说的，就是按照数组一维一维分配内存</p>
<h3 id="structure">Structure<a class="headerlink" href="#structure" title="Permanent link">&para;</a></h3>
<h4 id="data-alignment">Data Alignment<a class="headerlink" href="#data-alignment" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="p">};</span>
</code></pre></div>
<ul>
<li><code>sizeof(S)</code> 的结果是 12，数据对齐更有利于计算机计算的性能，<code>int</code> 占用 4 个字节，它起始的位置必须是 4 的倍数。</li>
<li>编译器会在 <code>c</code> 和 <code>j</code> 之间插入 3 个字节的间隙。</li>
<li>对于任何 <code>k</code> 字节的数据类型，其起始位置必须是 <code>k</code> 的倍数。</li>
<li>如果声明数组的话，可能在结构体后面进行填充，为的是使得每一个结构体元素满足上述条件。</li>
<li>有时候改变 structure 里面变量的声明顺序，就可以达到节省空间的效果。</li>
<li>数据对齐是针对于原始数据类型而言的，而不是封装过后的数据类型。</li>
</ul>
<h4 id="union">Union<a class="headerlink" href="#union" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="n">N_LEAF</span><span class="p">,</span><span class="w"> </span><span class="n">N_INTERNAL</span><span class="p">}</span><span class="w"> </span><span class="n">nodetype_t</span><span class="p">;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">node_t</span><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="n">nodetype_t</span><span class="w"> </span><span class="n">type</span><span class="p">;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="k">union</span><span class="p">{</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">        </span><span class="k">struct</span><span class="p">{</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">            </span><span class="k">struct</span><span class="w"> </span><span class="nc">node_t</span><span class="w"> </span><span class="o">*</span><span class="n">left</span><span class="p">;</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">            </span><span class="k">struct</span><span class="w"> </span><span class="nc">node_t</span><span class="w"> </span><span class="o">*</span><span class="n">right</span><span class="p">;</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">        </span><span class="p">}</span><span class="n">internal</span><span class="p">;</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="p">};</span>
</code></pre></div>
<ul>
<li>这是一个二叉树的结构体（叶子节点有两个 double 数据），我们企图用 union 区分叶子节点和非叶子节点从而节省空间。</li>
<li>对于 struct 套 struct 或者 union 套 struct，内层的 struct 都是由指针表示，占 8 个字节。</li>
<li>union 的作用主要是在 union 中的每个元素都共享同一块内存，因此可以起到节省空间的目的。</li>
<li>通过这个“同一块内存”的思想，我们还可以用于类型转换</li>
</ul>
<h3 id="xmm-registers">Xmm Registers<a class="headerlink" href="#xmm-registers" title="Permanent link">&para;</a></h3>
<p><code>xmm</code> 寄存器的最大优势在于支持 SIMD 指令集，这允许在单条指令中同时对多个数据进行操作。对于浮点数计算，这意味着可以在一次运算中对多个浮点数进行加法、减法、乘法、除法等操作。具体优势包括：</p>
<ul>
<li><strong>并行处理</strong>：一个 <code>xmm</code> 寄存器是 128 位宽，可以一次性处理四个单精度（32 位）浮点数或两个双精度（64 位）浮点数。而普通寄存器则一次只能处理一个数值。</li>
<li><strong>减少循环次数</strong>：例如，使用 <code>xmm</code> 寄存器加法指令 <code>addps</code> 可以同时对四个单精度浮点数进行操作，循环次数减少为普通寄存器的四分之一，大大减少指令的总执行时间。</li>
</ul>
<p>现代 CPU 对 SIMD 指令集（如 SSE, AVX）的支持进行了硬件级优化，这些优化包括：</p>
<ul>
<li><strong>向量化执行单元</strong>：CPU 内部有专门的硬件单元来处理 <code>xmm</code> 寄存器的向量操作，这些单元可以并行执行多条 SIMD 指令，从而进一步提升性能。</li>
<li><strong>数据对齐优化</strong>：<code>xmm</code> 寄存器通常需要对齐的数据进行加载（如 <code>movaps</code> 需要 16 字节对齐的内存地址），这可以更有效地利用缓存和内存带宽，加快数据加载速度。</li>
</ul>
<p>（更多优势可以参考 GPT）</p>
<h2 id="lecture-9-advanced-topics">Lecture 9 - Advanced Topics<a class="headerlink" href="#lecture-9-advanced-topics" title="Permanent link">&para;</a></h2>
<h3 id="buffer-overflow">Buffer Overflow<a class="headerlink" href="#buffer-overflow" title="Permanent link">&para;</a></h3>
<ul>
<li>当读入的数据大于栈所预留的空间，就会产生缓冲区溢出。</li>
</ul>
<h4 id="stack-randomization">Stack Randomization<a class="headerlink" href="#stack-randomization" title="Permanent link">&para;</a></h4>
<p>程序在每次运行的时候栈地址都不同，在 Linux 系统中，栈随机已经成为一种常规方式。</p>
<h4 id="stack-corruption-dection">Stack Corruption Dection<a class="headerlink" href="#stack-corruption-dection" title="Permanent link">&para;</a></h4>
<ul>
<li>在缓冲区相邻的位置放一个随机生成的“金丝雀值”</li>
<li>每次运行程序时，检测金丝雀值是否被修改</li>
<li>金丝雀值只读，不能被直接修改</li>
</ul>
<h4 id="limiting-executable-code-regions">Limiting Executable Code Regions<a class="headerlink" href="#limiting-executable-code-regions" title="Permanent link">&para;</a></h4>
<ul>
<li>针对以前的代码，以前很难将可读和可执行分开，导致栈上的攻击容易被执行</li>
<li>现在只需让栈上的数据变成可读写但是不可执行，用硬件检查，不会损失很多效率</li>
</ul>
<h3 id="x86-64-linux-memory-layout">x86-64 Linux Memory Layout<a class="headerlink" href="#x86-64-linux-memory-layout" title="Permanent link">&para;</a></h3>
<p><img alt="" src="https://github.com/Clovers2333/picx-images-hosting/raw/master/memory_layout.5xal4mcnfw.webp" /></p>
<ul>
<li>理论上总共有 2^47 bits 的内存可用</li>
<li>stack 从高位往低位存数据</li>
<li>local data 一般保存在 stack 下面</li>
<li>对于其他的数据，例如代码中的内存申请，保存在 heap 中，会上下交替分配空间，向中间靠近（？</li>
<li>代码保存在 text 中，所以执行代码的时候所看见的命令指令都是 <code>0x000..4</code> 开头的</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Clovers
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["content.code.annotate", "content.code.copy", "navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="../../../../../javascripts/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
        <script src="../../../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>